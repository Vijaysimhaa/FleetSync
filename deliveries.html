<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Deliveries - FleetSync</title>
<script src="https://cdn.tailwindcss.com/3.4.16"></script>
<script>
tailwind.config={
theme:{
extend:{
colors:{
primary:'#8B5CF6',
secondary:'#4B5563',
dark: '#111827',
darklight: '#1F2937',
success: '#10B981',
warning: '#F59E0B',
danger: '#EF4444'
},
borderRadius:{
'none':'0px',
'sm':'4px',
DEFAULT:'8px',
'md':'12px',
'lg':'16px',
'xl':'20px',
'2xl':'24px',
'3xl':'32px',
'full':'9999px',
'button':'8px'
}
}
}
}
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"></script>
<style>
/* Remixicon default content */
:where([class^="ri-"])::before { content: "\f3c2"; }

/* Body styling */
body {
font-family: 'Inter', sans-serif;
background-color: #111827;
color: white;
min-height: 100vh;
}

/* Sidebar item active state */
.sidebar-item.active {
background-color: rgba(139, 92, 246, 0.1);
border-left: 3px solid #8B5CF6;
}

/* Sidebar item hover state (not active) */
.sidebar-item:hover:not(.active) {
background-color: rgba(75, 85, 99, 0.2);
}

/* Custom scrollbar styling */
.custom-scrollbar::-webkit-scrollbar { width: 6px; }
.custom-scrollbar::-webkit-scrollbar-track { background: #1F2937; }
.custom-scrollbar::-webkit-scrollbar-thumb {
background-color: #4B5563;
border-radius: 20px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #6B7280; }

/* Custom checkbox styling */
.custom-checkbox { position: relative; display: inline-block; width: 18px; height: 18px; margin-right: 8px; }
.custom-checkbox input { opacity: 0; width: 0; height: 0; }
.checkmark {
position: absolute;
top: 0;
left: 0;
height: 18px;
width: 18px;
background-color: #1F2937;
border: 1px solid #4B5563;
border-radius: 4px;
}
.custom-checkbox input:checked ~ .checkmark { background-color: #8B5CF6; border-color: #8B5CF6; }
.checkmark:after { content: ""; position: absolute; display: none; }
.custom-checkbox input:checked ~ .checkmark:after { display: block; }
.custom-checkbox .checkmark:after {
left: 6px;
top: 2px;
width: 5px;
height: 10px;
border: solid white;
border-width: 0 2px 2px 0;
transform: rotate(45deg);
}

/* Custom switch styling */
.custom-switch { position: relative; display: inline-block; width: 44px; height: 22px; }
.custom-switch input { opacity: 0; width: 0; height: 0; }
.slider {
position: absolute;
cursor: pointer;
top: 0;
left: 0;
right: 0;
bottom: 0;
background-color: #4B5563;
transition: .4s;
border-radius: 34px;
}
.slider:before {
position: absolute;
content: "";
height: 18px;
width: 18px;
left: 3px;
bottom: 2px;
background-color: white;
transition: .4s;
border-radius: 50%;
}
input:checked + .slider { transform: translateX(20px); }

/* Hide number input arrows */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
-webkit-appearance: none;
margin: 0;
}

/* Date picker dropdown styling */
.date-picker-container { position: relative; }
.date-picker-dropdown {
display: none;
position: absolute;
top: 100%;
left: 0;
z-index: 50;
width: 300px;
background-color: #1F2937;
border: 1px solid #4B5563;
border-radius: 8px;
box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
padding: 1rem;
margin-top: 0.5rem;
}
.date-picker-dropdown.show { display: block; }

/* Styles for the animated logo */
.animated-logo {
font-family: 'Lobster', cursive;
font-size: 2.5rem; /* Adjust size as needed */
color: #FFFFFF; /* Adjust color as needed */
text-shadow: 0 0 5px #8A2BE2, 0 0 10px #8A2BE2; /* Thin purple glow */
animation: logoFloat 3s ease-in-out infinite;
}

/* Floating animation keyframes */
@keyframes logoFloat {
0%, 100% {
transform: translateY(0);
}
}

/* Profile link styling in sidebar */
.profile-link {
cursor: pointer;
}
</style>
</head>
<body>
<div class="flex h-screen overflow-hidden">
<aside class="hidden md:flex md:flex-col w-64 bg-darklight border-r border-gray-700 transition-all duration-300">
<div class="p-4 flex items-center border-b border-gray-700">
<span class="animated-logo">FleetSync</span> </div>
<div class="flex flex-col flex-1 overflow-y-auto custom-scrollbar">
<nav class="flex-1 px-2 py-4 space-y-1">
<a href="dashboard.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-dashboard-line ri-lg"></i>
</div>
<span>Dashboard</span>
</a>
<a href="deliveries.html" class="sidebar-item active flex items-center px-4 py-3 text-sm font-medium rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-truck-line ri-lg"></i>
</div>
<span>Deliveries</span>
</a>
<a href="warehouses.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-store-2-line ri-lg"></i>
</div>
<span>Warehouses</span>
</a>
<a href="drivers.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-user-3-line ri-lg"></i>
</div>
<span>Drivers</span>
</a>
<a href="alerts.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-notification-3-line ri-lg"></i>
</div>
<span>Alerts</span>
</a>
<a href="reports.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-file-list-3-line ri-lg"></i>
</div>
<span>Reports</span>
</a>
<div class="pt-4 pb-2">
<div class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider">
Settings
</div>
</div>
<a href="general.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-settings-line ri-lg"></i>
</div>
<span>General</span>
</a>
<a href="security.html" class="sidebar-item flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-md">
<div class="w-6 h-6 flex items-center justify-center mr-3">
<i class="ri-shield-keyhole-line ri-lg"></i>
</div>
<span>Security</span>
</a>
</nav>
<div class="p-4 border-t border-gray-700">
<div class="flex items-center justify-between"> <a href="profile.html" class="profile-link flex items-center"> <div class="flex-shrink-0">
<div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center text-primary">
<i class="ri-user-3-fill ri-lg"></i>
</div>
</div>
<div class="ml-3">
<p class="text-sm font-medium">Mr.V</p>
<p class="text-xs text-gray-400">Administrator</p>
</div>
</a>
<a href="login.html" class="ml-auto"> <div class="w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-700 cursor-pointer" title="Logout">
<i class="ri-logout-box-r-line"></i>
</div>
</a>
</div>
</div>
</div>
</aside>
<div class="md:hidden fixed bottom-4 left-4 z-50">
<button type="button" class="bg-primary text-white p-3 rounded-full shadow-lg !rounded-button">
<i class="ri-menu-line ri-lg"></i>
</button>
</div>
<div class="flex-1 flex flex-col overflow-hidden bg-dark">
<header class="bg-darklight border-b border-gray-700 py-4 px-6">
<div class="flex items-center justify-between">
<div class="flex items-center">
<div class="md:hidden mr-4">
<button type="button" class="text-gray-400 hover:text-white">
<i class="ri-menu-line ri-lg"></i>
</button>
</div>
<div class="flex items-center">
<a href="dashboard.html" class="text-gray-400 hover:text-white mr-2">
<i class="ri-dashboard-line"></i>
</a>
<span class="text-gray-400 mx-1">/</span>
<h1 class="text-xl font-semibold">Deliveries</h1>
</div>
</div>
<div class="flex items-center space-x-4">
<div class="relative">
<button type="button" class="text-gray-400 hover:text-white p-1 rounded-full">
<div class="w-8 h-8 flex items-center justify-center">
<i class="ri-notification-3-line ri-lg"></i>
</div>
<span class="notification-dot"></span>
</button>
</div>
</div>
</header>
<main class="flex-1 overflow-y-auto custom-scrollbar p-6">
<div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
<div>
<h2 class="text-lg font-medium">Delivery Management</h2>
<p class="text-sm text-gray-400">View and manage delivery details and statuses</p>
</div>
<div class="flex items-center space-x-3 mt-3 md:mt-0">
<div class="relative">
<div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400">
<i class="ri-search-line"></i>
</div>
<input type="text" class="bg-darklight border border-gray-700 text-white text-sm rounded-md block w-full pl-10 p-2.5 !rounded-button" placeholder="Search deliveries...">
</div>
<button id="add-delivery-button" class="bg-primary hover:bg-primary/90 text-white px-4 py-2.5 rounded-md text-sm font-medium !rounded-button whitespace-nowrap">
<i class="ri-add-line mr-1"></i> Add New Delivery
</button>
</div>
</div>

<div class="bg-darklight rounded-lg border border-gray-700">
<div class="flex justify-between items-center p-4 border-b border-gray-700">
<div class="flex items-center">
<h3 class="font-medium">All Deliveries</h3>
<span class="ml-2 text-xs bg-gray-700 text-gray-300 px-2 py-0.5 rounded-full" id="total-deliveries-count">Loading...</span>
</div>
<div class="flex items-center space-x-3">
<div class="relative">
<select id="bulk-actions-select" class="bg-dark border border-gray-700 text-white text-sm rounded-md block w-full p-2 pr-8 appearance-none !rounded-button">
<option selected value="">Bulk Actions</option>
<option value="completed">Mark as Completed</option>
<option value="delayed">Mark as Delayed</option>
<option value="cancelled">Cancel Selected</option>
<option value="delete">Delete Selected</option>
</select>
<div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
<i class="ri-arrow-down-s-line"></i>
</div>
</div>
<button id="apply-bulk-action-button" class="bg-gray-700 hover:bg-gray-600 text-white px-3 py-2 rounded-md text-sm !rounded-button whitespace-nowrap">
Apply
</button>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full text-sm text-left">
<thead class="text-xs text-gray-400 uppercase bg-gray-800/30">
<tr>
<th scope="col" class="px-4 py-3">
<label class="custom-checkbox">
<input type="checkbox" id="selectAllDeliveries">
<span class="checkmark"></span>
</label>
</th>
<th scope="col" class="px-4 py-3 cursor-pointer">
<div class="flex items-center">
ID
<i class="ri-arrow-up-s-line ml-1"></i>
</div>
</th>
<th scope="col" class="px-6 py-3">
Origin
</th>
<th scope="col" class="px-6 py-3">
Destination
</th>
<th scope="col" class="px-6 py-3">
Driver
</th>
<th scope="col" class="px-6 py-3">
Scheduled
</th>
<th scope="col" class="px-6 py-3">
ETA
</th>
<th scope="col" class="px-6 py-3">
Status
</th>
<th scope="col" class="px-4 py-3">
<span class="sr-only">Actions</span>
</th>
</tr>
</thead>
<tbody id="deliveries-table-body">
<tr>
<td colspan="9" class="text-center py-4 text-gray-400">Loading deliveries...</td>
</tr>
</tbody>
</table>
</div>
<div class="p-4 border-t border-gray-700 flex flex-col sm:flex-row items-center justify-between">
<div class="text-sm text-gray-400 mb-4 sm:mb-0">
Showing <span class="font-medium text-white" id="showing-deliveries">...</span>
</div>
<div class="flex items-center">
<div class="mr-4">
<select id="per-page-select" class="bg-dark border border-gray-700 text-white text-sm rounded-md p-2 pr-8 appearance-none !rounded-button">
<option selected value="10">10 per page</option>
<option value="20">20 per page</option>
<option value="50">50 per page</option>
</select>
<div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
<i class="ri-arrow-down-s-line"></i>
</div>
</div>
<div class="flex items-center space-x-1">
<button id="prev-page-button" class="p-2 text-gray-400 hover:text-white rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
<i class="ri-arrow-left-s-line"></i>
</button>
<button class="p-2 bg-primary text-white rounded-md page-button" data-page="1">
1
</button>
<button class="p-2 text-gray-400 hover:text-white rounded-md hover:bg-gray-700 page-button" data-page="2">
2
</button>
<button class="p-2 text-gray-400 hover:text-white rounded-md hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed" id="next-page-button">
<i class="ri-arrow-right-s-line"></i>
</button>
</div>
</div>
</div>
</div>

<div id="deliveryDetailsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center hidden">
<div class="bg-darklight rounded-lg max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col">
<div class="flex justify-between items-center p-4 border-b border-gray-700">
<h3 class="text-lg font-medium">Delivery Details</h3>
<button id="closeDeliveryDetailsModal" class="text-gray-400 hover:text-white">
<i class="ri-close-line ri-lg"></i>
</button>
</div>
<div class="overflow-y-auto custom-scrollbar p-6 flex-1">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
<div class="bg-dark rounded-lg p-4 border border-gray-700">
<p class="text-sm text-gray-400">Delivery ID</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-id"></h3>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700 col-span-1 md:col-span-2">
<p class="text-sm text-gray-400">Origin</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-origin"></h3>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700 col-span-1 md:col-span-2">
<p class="text-sm text-gray-400">Destination</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-destination"></h3>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700">
<p class="text-sm text-gray-400">Driver</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-driver"></h3>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700">
<p class="text-sm text-gray-400">Scheduled Time</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-scheduled"></h3>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700">
<p class="text-sm text-gray-400">Estimated Time of Arrival</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-eta"></h3>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700">
<p class="text-sm text-gray-400">Status</p>
<h3 class="text-lg font-bold mt-1" id="modal-delivery-status"></h3>
</div>
</div>
<div class="bg-dark rounded-lg p-4 border border-gray-700">
<h4 class="text-sm font-medium text-gray-400 mb-3">Additional Details</h4>
<p class="text-gray-300" id="modal-delivery-additional"></p>
</div>
</div>
<div class="p-4 border-t border-gray-700 flex justify-end space-x-3">
<button id="modal-close-button" class="bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm !rounded-button whitespace-nowrap">
Close
</button>
<button id="modal-edit-button" class="bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md text-sm !rounded-button whitespace-nowrap">
Edit Delivery
</button>
</div>
</div>
</div>

</main>
</div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
// Placeholder for mobile sidebar toggle functionality
const mobileMenuButton = document.querySelector('.md\\:hidden button');
if (mobileMenuButton) {
mobileMenuButton.addEventListener('click', function() {
// Implement sidebar toggle logic here
console.log('Mobile menu button clicked');
});
}

// Get references to key elements
const selectAllDeliveriesCheckbox = document.getElementById('selectAllDeliveries');
const deliveriesTableBody = document.getElementById('deliveries-table-body');
const totalDeliveriesCountSpan = document.getElementById('total-deliveries-count');
const showingDeliveriesSpan = document.getElementById('showing-deliveries');
const addDeliveryButton = document.getElementById('add-delivery-button');
const bulkActionsSelect = document.getElementById('bulk-actions-select');
const applyBulkActionButton = document.getElementById('apply-bulk-action-button');
const perPageSelect = document.getElementById('per-page-select');
const prevPageButton = document.getElementById('prev-page-button');
const nextPageButton = document.getElementById('next-page-button');
const paginationButtonsContainer = document.querySelector('.flex.items-center.space-x-1'); // Container for page number buttons


// Delivery Details Modal functionality
const deliveryDetailsModal = document.getElementById('deliveryDetailsModal');
const closeDeliveryDetailsModalButton = document.getElementById('closeDeliveryDetailsModal');
const modalCloseButton = document.getElementById('modal-close-button');
const modalEditButton = document.getElementById('modal-edit-button');


// Add event listeners for modal buttons
if (deliveryDetailsModal) {
if (closeDeliveryDetailsModalButton) {
closeDeliveryDetailsModalButton.addEventListener('click', function() {
deliveryDetailsModal.classList.add('hidden');
});
}
if (modalCloseButton) {
modalCloseButton.addEventListener('click', function() {
deliveryDetailsModal.classList.add('hidden');
});
}
if (modalEditButton) {
modalEditButton.addEventListener('click', function() {
// Placeholder for Edit Delivery action
console.log('Edit Delivery button clicked in modal');
// You would typically get the delivery ID from the modal content
// and navigate to an edit page or open an edit modal
alert('Edit Delivery functionality not yet implemented.'); // Using alert for placeholder
});
}

// Close modal when clicking outside
window.addEventListener('click', function(event) {
if (event.target === deliveryDetailsModal) {
deliveryDetailsModal.classList.add('hidden');
}
});
}


// Function to fetch delivery data from a Netlify Function
function loadDeliveries() {
    // Static delivery data
    const deliveries = [
        {
            id: "DEL1001",
            origin: "Warehouse A",
            destination: "123 Main St, New York, NY",
            driver: "John Smith",
            scheduled: "2023-06-15 08:00 AM",
            eta: "2023-06-15 10:30 AM",
            status: "Completed",
            items: [
                { name: "Laptop", quantity: 5, weight: "10 kg" },
                { name: "Monitors", quantity: 10, weight: "50 kg" }
            ],
            notes: "Customer requested delivery before noon"
        },
        {
            id: "DEL1002",
            origin: "Warehouse B",
            destination: "456 Park Ave, Boston, MA",
            driver: "Sarah Johnson",
            scheduled: "2023-06-15 09:15 AM",
            eta: "2023-06-15 12:45 PM",
            status: "In Transit",
            items: [
                { name: "Smartphones", quantity: 20, weight: "5 kg" },
                { name: "Tablets", quantity: 15, weight: "7.5 kg" }
            ],
            notes: "Call customer 30 minutes before arrival"
        },
        {
            id: "DEL1003",
            origin: "Warehouse A",
            destination: "789 Oak St, Chicago, IL",
            driver: "Michael Brown",
            scheduled: "2023-06-15 10:30 AM",
            eta: "2023-06-15 02:00 PM",
            status: "Delayed",
            items: [
                { name: "Printers", quantity: 3, weight: "30 kg" },
                { name: "Paper Reams", quantity: 50, weight: "125 kg" }
            ],
            notes: "Traffic delay on I-90, ETA pushed back by 1 hour"
        },
        {
            id: "DEL1004",
            origin: "Warehouse C",
            destination: "321 Pine St, Seattle, WA",
            driver: "Emily Davis",
            scheduled: "2023-06-16 08:45 AM",
            eta: "2023-06-16 11:15 AM",
            status: "Pending",
            items: [
                { name: "Desk Chairs", quantity: 8, weight: "160 kg" },
                { name: "Desks", quantity: 4, weight: "200 kg" }
            ],
            notes: "Heavy items, need lift gate truck"
        },
        {
            id: "DEL1005",
            origin: "Warehouse B",
            destination: "654 Maple Ave, Austin, TX",
            driver: "David Wilson",
            scheduled: "2023-06-16 09:30 AM",
            eta: "2023-06-16 12:00 PM",
            status: "Completed",
            items: [
                { name: "Keyboards", quantity: 25, weight: "12.5 kg" },
                { name: "Mice", quantity: 25, weight: "5 kg" }
            ],
            notes: "Customer signature required"
        },
        {
            id: "DEL1006",
            origin: "Warehouse A",
            destination: "987 Cedar Rd, Miami, FL",
            driver: "Jessica Martinez",
            scheduled: "2023-06-16 10:15 AM",
            eta: "2023-06-16 01:45 PM",
            status: "Loading",
            items: [
                { name: "Servers", quantity: 2, weight: "40 kg" },
                { name: "Network Switches", quantity: 5, weight: "10 kg" }
            ],
            notes: "Fragile equipment, handle with care"
        },
        {
            id: "DEL1007",
            origin: "Warehouse C",
            destination: "159 Birch Ln, Denver, CO",
            driver: "Robert Taylor",
            scheduled: "2023-06-17 08:30 AM",
            eta: "2023-06-17 11:00 AM",
            status: "Cancelled",
            items: [
                { name: "Headphones", quantity: 30, weight: "6 kg" },
                { name: "Speakers", quantity: 10, weight: "20 kg" }
            ],
            notes: "Cancelled by customer due to change in requirements"
        },
        {
            id: "DEL1008",
            origin: "Warehouse B",
            destination: "753 Spruce St, Portland, OR",
            driver: "Amanda Clark",
            scheduled: "2023-06-17 09:45 AM",
            eta: "2023-06-17 12:30 PM",
            status: "Pending",
            items: [
                { name: "Monitors", quantity: 12, weight: "60 kg" },
                { name: "Docking Stations", quantity: 12, weight: "12 kg" }
            ],
            notes: "Business closed for lunch 12-1 PM"
        },
        {
            id: "DEL1009",
            origin: "Warehouse A",
            destination: "852 Elm St, San Francisco, CA",
            driver: "Thomas Anderson",
            scheduled: "2023-06-17 10:00 AM",
            eta: "2023-06-17 01:30 PM",
            status: "In Transit",
            items: [
                { name: "Laptops", quantity: 15, weight: "30 kg" },
                { name: "Laptop Bags", quantity: 15, weight: "7.5 kg" }
            ],
            notes: "High priority customer, ensure on-time delivery"
        },
        {
            id: "DEL1010",
            origin: "Warehouse C",
            destination: "426 Walnut Ave, Philadelphia, PA",
            driver: "Jennifer White",
            scheduled: "2023-06-18 08:15 AM",
            eta: "2023-06-18 10:45 AM",
            status: "Pending",
            items: [
                { name: "Printers", quantity: 5, weight: "50 kg" },
                { name: "Toner Cartridges", quantity: 20, weight: "10 kg" }
            ],
            notes: "Delivery to loading dock in rear of building"
        }
    ];
    
    console.log('Loaded deliveries data:', deliveries);

    // Clear existing table rows
    deliveriesTableBody.innerHTML = '';

    if (deliveries && deliveries.length > 0) {
        // Populate the table with static data
        deliveries.forEach(delivery => {
            const row = document.createElement('tr');
            row.classList.add('border-b', 'border-gray-700', 'hover:bg-gray-800/30');

            // Determine status class
            let statusClass = 'bg-gray-700 text-gray-300'; // Default
            if (delivery.status === 'Completed') {
                statusClass = 'bg-success/10 text-success';
            } else if (delivery.status === 'Pending' || delivery.status === 'In Transit' || delivery.status === 'Loading') {
                statusClass = 'bg-warning/10 text-warning';
            } else if (delivery.status === 'Delayed' || delivery.status === 'Cancelled') {
                statusClass = 'bg-danger/10 text-danger';
            }

            row.innerHTML = `
                <td class="px-4 py-4">
                    <label class="custom-checkbox">
                        <input type="checkbox" data-delivery-id="${delivery.id}">
                        <span class="checkmark"></span>
                    </label>
                </td>
                <td class="px-4 py-4 font-medium">
                    ${delivery.id || 'N/A'}
                </td>
                <td class="px-6 py-4">
                    ${delivery.origin || 'N/A'}
                </td>
                <td class="px-6 py-4">
                    ${delivery.destination || 'N/A'}
                </td>
                <td class="px-6 py-4">
                    ${delivery.driver || 'N/A'}
                </td>
                <td class="px-6 py-4">
                    ${delivery.scheduled || 'N/A'}
                </td>
                <td class="px-6 py-4">
                    ${delivery.eta || 'N/A'}
                </td>
                <td class="px-6 py-4">
                    <span class="${statusClass} text-xs px-2.5 py-1 rounded-full">
                        ${delivery.status || 'N/A'}
                    </span>
                </td>
                <td class="px-4 py-4">
                    <div class="flex items-center space-x-2">
                        <button class="text-gray-400 hover:text-white p-1 rounded-md hover:bg-gray-700 view-details-button" title="View Details" data-delivery-id="${delivery.id}">
                            <i class="ri-eye-line"></i>
                        </button>
                        <button class="text-gray-400 hover:text-white p-1 rounded-md hover:bg-gray-700 edit-delivery-button" title="Edit" data-delivery-id="${delivery.id}">
                            <i class="ri-pencil-line"></i>
                        </button>
                        <button class="text-gray-400 hover:text-danger p-1 rounded-md hover:bg-gray-700 delete-delivery-button" title="Delete" data-delivery-id="${delivery.id}">
                            <i class="ri-delete-bin-line"></i>
                        </button>
                    </div>
                </td>
            `;
            deliveriesTableBody.appendChild(row);
        });

        // Update total count and showing info
        totalDeliveriesCountSpan.textContent = `${deliveries.length} total`;
        showingDeliveriesSpan.textContent = `1-${deliveries.length} of ${deliveries.length} deliveries`;

        // Add event listeners for action buttons in rows
        addActionButtonListeners(deliveries);

    } else {
        deliveriesTableBody.innerHTML = `
            <tr>
                <td colspan="9" class="text-center py-4 text-gray-400">No deliveries found.</td>
            </tr>
        `;
        totalDeliveriesCountSpan.textContent = '0 total';
        showingDeliveriesSpan.textContent = '0-0 of 0 deliveries';
    }

    // Re-attach select all listener after populating rows
    if (selectAllDeliveriesCheckbox) {
        selectAllDeliveriesCheckbox.checked = false; // Reset select all
        const deliveryCheckboxes = document.querySelectorAll('#deliveries-table-body .custom-checkbox input');
        selectAllDeliveriesCheckbox.removeEventListener('change', handleSelectAllChange); // Remove previous listener
        selectAllDeliveriesCheckbox.addEventListener('change', handleSelectAllChange); // Add new listener
    }
}

// Function to add event listeners to action buttons in dynamically created rows
function addActionButtonListeners(deliveriesData) {
// Add listeners for View Details buttons
const viewDetailsButtons = document.querySelectorAll('.view-details-button');
viewDetailsButtons.forEach(button => {
button.addEventListener('click', function() {
const deliveryId = this.getAttribute('data-delivery-id');
const delivery = deliveriesData.find(d => d.id === deliveryId);
if (delivery) {
populateDeliveryDetailsModal(delivery);
deliveryDetailsModal.classList.remove('hidden');
} else {
console.error('Delivery details not found for ID:', deliveryId);
alert('Error: Could not find delivery details.'); // Placeholder alert
}
});
});

// Add listeners for Edit buttons
const editButtons = document.querySelectorAll('.edit-delivery-button');
editButtons.forEach(button => {
button.addEventListener('click', function() {
const deliveryId = this.getAttribute('data-delivery-id');
console.log('Edit button clicked for delivery ID:', deliveryId);
// Placeholder for edit functionality
alert(`Edit functionality for Delivery ID ${deliveryId} not yet implemented.`); // Placeholder alert
// In a real app, you would navigate to an edit page or open an edit modal
});
});

// Add listeners for Delete buttons
const deleteButtons = document.querySelectorAll('.delete-delivery-button');
deleteButtons.forEach(button => {
button.addEventListener('click', function() {
const deliveryId = this.getAttribute('data-delivery-id');
console.log('Delete button clicked for delivery ID:', deliveryId);
// Placeholder for delete functionality
if (confirm(`Are you sure you want to delete Delivery ID ${deliveryId}?`)) { // Using confirm for placeholder
// In a real app, you would make an API call to delete the delivery
console.log(`Deleting Delivery ID ${deliveryId}...`);
alert(`Delete functionality for Delivery ID ${deliveryId} not yet implemented.`); // Placeholder alert
// After successful deletion, you would refresh the table
// fetchDeliveries();
}
});
});
}

// Function to populate the delivery details modal
function populateDeliveryDetailsModal(delivery) {
document.getElementById('modal-delivery-id').textContent = delivery.id || 'N/A';
document.getElementById('modal-delivery-origin').textContent = delivery.origin || 'N/A';
document.getElementById('modal-delivery-destination').textContent = delivery.destination || 'N/A';
document.getElementById('modal-delivery-driver').textContent = delivery.driver || 'N/A';
document.getElementById('modal-delivery-scheduled').textContent = delivery.scheduled || 'N/A';
document.getElementById('modal-delivery-eta').textContent = delivery.eta || 'N/A';

// Format status with span and class
let statusClass = 'bg-gray-700 text-gray-300';
if (delivery.status === 'Completed') {
statusClass = 'bg-success/10 text-success';
} else if (delivery.status === 'Pending' || delivery.status === 'In Transit' || delivery.status === 'Loading') {
statusClass = 'bg-warning/10 text-warning';
} else if (delivery.status === 'Delayed' || delivery.status === 'Cancelled') {
statusClass = 'bg-danger/10 text-danger';
}
document.getElementById('modal-delivery-status').innerHTML = `<span class="${statusClass} text-xs px-2.5 py-1 rounded-full">${delivery.status || 'N/A'}</span>`;
document.getElementById('modal-delivery-additional').textContent = delivery.additionalDetails || 'No additional details available.';
}


// Event listener for "Add New Delivery" button
if (addDeliveryButton) {
addDeliveryButton.addEventListener('click', function() {
console.log('Add New Delivery button clicked');
// Placeholder for adding a new delivery
alert('Add New Delivery functionality not yet implemented.'); // Using alert for placeholder
// In a real app, you would navigate to a new page or open a modal for adding a delivery
});
}

// Event listener for "Apply" button for bulk actions
if (applyBulkActionButton && bulkActionsSelect) {
applyBulkActionButton.addEventListener('click', function() {
const selectedAction = bulkActionsSelect.value;
const selectedDeliveries = Array.from(document.querySelectorAll('#deliveries-table-body .custom-checkbox input:checked'))
.map(checkbox => checkbox.getAttribute('data-delivery-id'));

if (selectedDeliveries.length === 0) {
alert('Please select at least one delivery for the bulk action.');
return;
}

if (selectedAction === '') {
alert('Please select a bulk action.');
return;
}

console.log('Applying bulk action:', selectedAction, 'to deliveries:', selectedDeliveries);
// Placeholder for bulk actions
alert(`Bulk action "${selectedAction}" on ${selectedDeliveries.length} deliveries not yet implemented.`); // Placeholder alert
// In a real app, you would make an API call to perform the bulk action
// After successful action, you would refresh the table: fetchDeliveries();
});
}

// Event listener for "Select All" checkbox
function handleSelectAllChange() {
const deliveryCheckboxes = document.querySelectorAll('#deliveries-table-body .custom-checkbox input');
deliveryCheckboxes.forEach(checkbox => {
checkbox.checked = selectAllDeliveriesCheckbox.checked;
});
}
if (selectAllDeliveriesCheckbox) {
// Initial listener added after data fetch
}


// Event listener for "Per page" select
if (perPageSelect) {
perPageSelect.addEventListener('change', function() {
const itemsPerPage = this.value;
console.log('Items per page changed to:', itemsPerPage);
// Placeholder for pagination logic
alert(`Changing items per page to ${itemsPerPage} not yet implemented.`); // Placeholder alert
// In a real app, you would refetch data from the API with pagination parameters
// fetchDeliveries({ page: 1, perPage: itemsPerPage });
});
}

// Event listeners for Pagination buttons (Placeholder)
if (prevPageButton) {
prevPageButton.addEventListener('click', function() {
console.log('Previous page button clicked');
// Placeholder for pagination logic
alert('Pagination functionality not yet implemented.'); // Placeholder alert
// In a real app, you would update the page number and refetch data
// fetchDeliveries({ page: currentPage - 1, perPage: currentPerPage });
});
}

if (nextPageButton) {
nextPageButton.addEventListener('click', function() {
console.log('Next page button clicked');
// Placeholder for pagination logic
alert('Pagination functionality not yet implemented.'); // Placeholder alert
// In a real app, you would update the page number and refetch data
// fetchDeliveries({ page: currentPage + 1, perPage: currentPerPage });
});
}

// Add listeners for individual page number buttons (Placeholder)
// This requires dynamically creating these buttons based on total pages
// For now, we'll just add listeners to the existing placeholder buttons
const pageButtons = document.querySelectorAll('.page-button');
pageButtons.forEach(button => {
button.addEventListener('click', function() {
const pageNumber = this.getAttribute('data-page');
console.log('Page button clicked for page:', pageNumber);
// Placeholder for pagination logic
alert(`Navigating to page ${pageNumber} not yet implemented.`); // Placeholder alert
// In a real app, you would refetch data for the selected page
// fetchDeliveries({ page: pageNumber, perPage: currentPerPage });
});
});


// Call the function to load static deliveries data when the page loads
loadDeliveries();

});
</script>
</body>
</html>
